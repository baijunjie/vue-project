/////////////////////////////////// 自定义样式工具 ///////////////////////////////////

// 警告框
.alert-init(@bg_color, @bd_color, @text_color) {
	padding: 15px;
	border: 1px solid @bd_color;
	border-radius: 4px;
	color: @text_color;
	background-color: @bg_color;

	a {
		.b;
		color: darken(@text_color, 10%);
	}
}
.alert-green() {
	.alert-init(@alert_green_bg; @alert_green_border; @alert_green_text);
}
.alert-blue() {
	.alert-init(@alert_blue_bg; @alert_blue_border; @alert_blue_text);
}
.alert-yellow() {
	.alert-init(@alert_yellow_bg; @alert_yellow_border; @alert_yellow_text);
}
.alert-red() {
	.alert-init(@alert_red_bg; @alert_red_border; @alert_red_text);
}



// 提醒气泡
// 默认在元素的 data-title 属性上设置气泡提醒内容
.hint-init(@bg_color, @font_size, @z_index, @prop) {
	@font_color: contrast(@bg_color, black, white, 65%);

	&:before,
	&:after {
		.transition(opacity .3s);
		.op(0);
		pointer-events: none;
		z-index: @z_index;
	}

	&:after {
		content: attr(@prop);
		padding: 5px 8px;
		color: @font_color;
		font-size: @font_size;
		line-height: 1.5;
		text-align: center;
		text-shadow: none;
		text-transform: none;
		letter-spacing: normal;
		word-wrap: break-word;
		white-space: pre;
		background: @bg_color;
		.bdrd(4px);
	}

	&:hover,
	&:active {
		&:before,
		&:after {
			.op(1);
		}
	}
}
.hint-top(@color) {
	.barr(@color, 10px, 5px, auto auto 100% 50%, 0 0 5px -5px, before);
	&:after {
		.hc(bottom, 100%);
		margin-bottom: 10px;
	}
}
.hint-bottom(@color) {
	.tarr(@color, 10px, 5px, 100% auto auto 50%, 5px 0 0 -5px, before);
	&:after {
		.hc(top, 100%);
		margin-top: 10px;
	}
}
.hint-left(@color) {
	.rarr(@color, 5px, 10px, 50% 100% auto auto, -5px 5px 0 0, before);
	&:after {
		.vc(right, 100%);
		margin-right: 10px;
	}
}
.hint-right(@color) {
	.larr(@color, 5px, 10px, 50% auto auto 100%, -5px 0 0 5px, before);
	&:after {
		.vc(left, 100%);
		margin-left: 10px;
	}
}
.hint(top, @color: @hint_default_color, @font_size: 12px, @z_index: 99999, @prop: data-title) {
	.hint-init(@color, @font_size, @z_index, @prop);
	.hint-top(@color);
}
.hint(bottom, @color: @hint_default_color, @font_size: 12px, @z_index: 99999, @prop: data-title) {
	.hint-init(@color, @font_size, @z_index, @prop);
	.hint-bottom(@color);
}
.hint(left, @color: @hint_default_color, @font_size: 12px, @z_index: 99999, @prop: data-title) {
	.hint-init(@color, @font_size, @z_index, @prop);
	.hint-left(@color);
}
.hint(right, @color: @hint_default_color, @font_size: 12px, @z_index: 99999, @prop: data-title) {
	.hint-init(@color, @font_size, @z_index, @prop);
	.hint-right(@color);
}



// 菜单
// html 文档结构如下：
// <ul class="menu">
// 	<li><a href="">menu1</a></li>
// 	<li><a href="">menu2</a></li>
// 	<li><a href="">menu3</a></li>
// 	<li class="line"></li>
// 	<li><a href="">menu4</a></li>
// </ul>
.menu(
	@bg_color: @menu_default_bg_color,
	@border_color: @menu_default_border_color,
	@item: 'a',
	@line: '>.line') {

	@item_selector: e(@item);
	@line_selector: e(@line);

	position: absolute;
	z-index: 1;
	padding: .5em 0;
	list-style: none;
	text-align: left;
	background-color: @bg_color;
	border: 1px solid @border_color;
	.bdrd(4px);
	.box-shadow(0 6px 12px rgba(0,0,0,.175));

	.menu-bottom-left();

	@{item_selector} {
		display: block;
		padding: .3em 1.5em;
		line-height: 1.5;
		white-space: nowrap;
		cursor: pointer;
	}

	a {
		.acl(none);
	}

	@{line_selector} {
		height: 1px;
		margin: .5em 0;
		overflow: hidden;
		background-color: @menu_line_color;
	}
}
.menu-bottom-left() {
	top: 100%;
	right: auto;
	bottom: auto;
	left: 0;
	margin: 2px 0 0 0;
}
.menu-bottom-right() {
	top: 100%;
	right: 0;
	bottom: auto;
	left: auto;
	margin: 2px 0 0 0;
}
.menu-top-left() {
	top: auto;
	right: auto;
	bottom: 100%;
	left: 0;
	margin: 0 0 2px 0;
}
.menu-top-right() {
	top: auto;
	right: 0;
	bottom: 100%;
	left: auto;
	margin: 0 0 2px 0;
}
.menu-left-top() {
	top: 0;
	right: 100%;
	bottom: auto;
	left: auto;
	margin: 0 2px 0 0;
}
.menu-left-bottom() {
	top: auto;
	right: 100%;
	bottom: 0;
	left: auto;
	margin: 0 2px 0 0;
}
.menu-right-top() {
	top: 0;
	right: auto;
	bottom: auto;
	left: 100%;
	margin: 0 0 0 2px;
}
.menu-right-bottom() {
	top: auto;
	right: auto;
	bottom: 0;
	left: 100%;
	margin: 0 0 0 2px;
}



// 图标字体
.icon-font(@size, @color: inherit) {
	.lh(@size);
	.ftsz(@size);
	color: @color;
	text-decoration: none;
}

// 图标字体按钮
.icon-font-btn(@size, @color) when (iscolor(@color)) {
	.icon-font(@size, @color);
	.transition(color .3s);
	cursor: pointer;

	&.active,
	&:active,
	&:hover {
		color: contrast(@color, darken(@color,20%), lighten(@color,20%), 80%);
	}
}
.icon-font-btn(@size, @color) when (length(@color)>1) {
	.icon-font(@size, extract(@color, 1));
	.transition(color .3s);
	cursor: pointer;

	&.active,
	&:active,
	&:hover {
		color: extract(@color, 2);
	}
}

// 数字提示泡泡
.num-pop-init(@bg_color, @font_color, @size) {
	@font_size: @size * .6666;
	@padding: round(@size * .2);
	@min_width: @size - @padding * 2;

	.inbl;
	vertical-align: middle;
	.lh(@size);
	.bdrd(@size);
	.ftsz(@font_size, center);
	min-width: @min_width;
	padding: 0 @padding;
	color: @font_color;
	background-color: @bg_color;
	font-family: Arial, Verdana, sans-serif;
	&:empty { display: none; }
}
.num-pop(@color: @num_pop_default_bg_color, @size: 20px) when (iscolor(@color)) {
	.num-pop-init(@color, @num_pop_default_font_color, @size);
}
.num-pop(@color, @size: 20px) when (length(@color)>1) {
	.num-pop-init(extract(@color, 1), extract(@color, 2), @size);
}


// 对话框泡泡
.dialog-pop(@direction, @color: #fff) {
	@new_color: darken(@color, max(lightness(@color)-95%,0%));
	@bg_color: lighten(@new_color, max(10%-lightness(@new_color),0%));
	@bg_color_lighten: lighten(@bg_color, 5%);
	@bg_color_darken: darken(@bg_color, 5%);
	@bd_color: darken(@bg_color, 10%);

	position: relative;
	padding: 10px;
	.bgcl(@bg_color);
	.bd(@bd_color);
	.bdrd(10px);
	.box-shadow(inset 0 1px 0 rgba(255, 255, 255, .4), 0 1px 2px rgba(0, 0, 0, .3););
	background-image: -webkit-linear-gradient(top, @bg_color_lighten, @bg_color 10px, @bg_color calc(~'100% - 10px'), @bg_color_darken);
    background-image: -o-linear-gradient(top, @bg_color_lighten, @bg_color 10px, @bg_color calc(~'100% - 10px'), @bg_color_darken);
    background-image: linear-gradient(to bottom, @bg_color_lighten, @bg_color 10px, @bg_color calc(~'100% - 10px'), @bg_color_darken);
    background-repeat: no-repeat;

	& when (@direction = left) {
		.larr(@bd_color, 10px, 20px, 10px 100% auto auto, 0 0 0 0, before);
		.larr(@bg_color, 10px, 20px, 10px 100% auto auto, 0 -2px 0 0, after);
	}

	& when (@direction = right) {
		.rarr(@bd_color, 10px, 20px, 10px auto auto 100%, 0 0 0 0, before);
		.rarr(@bg_color, 10px, 20px, 10px auto auto 100%, 0 0 0 -2px, after);
	}
}